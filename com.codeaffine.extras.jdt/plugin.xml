<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension
         point="org.eclipse.core.expressions.definitions">
      <definition
            id="com.codeaffine.extras.jdt.internal.JUnitStatusVisibleExpression">
         <with
               variable="activeWorkbenchWindow">
            <test
                  args="show_junit_status_bar"
                  forcePluginActivation="true"
                  property="com.codeaffine.extras.jdt.internal.PreferenceStore.isTrue"
                  value="true">
            </test>
         </with>
      </definition>
   </extension>
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="org.eclipse.ui.views.showView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+Q U">
         <parameter
               id="org.eclipse.ui.views.showView.viewId"
               value="org.eclipse.jdt.junit.ResultView">
         </parameter>
      </key>
      <key
            platform="cocoa"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+Q U">
      </key>
      <key
            commandId="org.eclipse.ui.views.showView"
            platform="cocoa"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="COMMAND+ALT+Q U">
         <parameter
               id="org.eclipse.ui.views.showView.viewId"
               value="org.eclipse.jdt.junit.ResultView">
         </parameter>
      </key>
  </extension>
   <extension
         point="org.eclipse.core.expressions.propertyTesters">
      <propertyTester
            class="com.codeaffine.extras.jdt.internal.prefs.PreferencePropertyTester"
            id="com.codeaffine.extras.jdt.internal.PreferencePropertyTester"
            namespace="com.codeaffine.extras.jdt.internal.PreferenceStore"
            properties="isTrue"
            type="org.eclipse.ui.services.IServiceLocator">
      </propertyTester>
   </extension>
  <extension
        point="org.eclipse.ui.menus">
     <menuContribution
           allPopups="false"
           locationURI="toolbar:org.eclipse.ui.trim.status">
        <toolbar
            id="com.codeaffine.extras.jdt.internal.JUnitStatusToolBar"
            label="JUnit">
           <command
                 commandId="org.eclipse.ui.views.showView"
                 icon="$nl$/icons/etool16/junit.gif"
                 id="com.codeaffine.extras.jdt.internal.OpenJUnitViewToolItem"
                 style="push">
              <parameter
                    name="org.eclipse.ui.views.showView.viewId"
                    value="org.eclipse.jdt.junit.ResultView">
              </parameter>
              <visibleWhen
                    checkEnabled="false">
                 <reference
                       definitionId="com.codeaffine.extras.jdt.internal.JUnitStatusVisibleExpression">
                 </reference>
              </visibleWhen>
           </command>
           <control
                 class="com.codeaffine.extras.jdt.internal.junitstatus.JUnitStatusContributionItem"
                 id="com.codeaffine.extras.jdt.internal.JUnitStatusContributionItem">
              <visibleWhen
                    checkEnabled="false">
                 <reference
                       definitionId="com.codeaffine.extras.jdt.internal.JUnitStatusVisibleExpression">
                 </reference>
              </visibleWhen>
           </control>
        </toolbar>
     </menuContribution>
  </extension>
  <extension
        point="org.eclipse.ui.preferencePages">
     <page
           category="org.eclipse.jdt.junit.preferences"
           class="com.codeaffine.extras.jdt.internal.junitstatus.JUnitStatusBarPreferencePage"
           id="com.codeaffine.extras.jdt.internal.JUnitStatusBarPreferencePage"
           name="JUnit Status Bar">
        <keywordReference
              id="org.eclipse.jdt.junit.JUnit">
        </keywordReference>
     </page>
  </extension>
  <extension
        point="org.eclipse.core.runtime.preferences">
     <initializer
           class="com.codeaffine.extras.jdt.internal.prefs.WorkspaceScopePreferenceInitializer">
     </initializer>
  </extension>
</plugin>
